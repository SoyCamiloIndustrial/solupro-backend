<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>SoluPro - Pago</title>
  <script src="https://checkout.wompi.co/widget.js"></script>
</head>
<body>

<h1>Comprar Curso - $2.000 COP</h1>
<button id="payBtn">Pagar con Wompi</button>

<script>
  document.getElementById("payBtn").addEventListener("click", async () => {

    const response = await fetch("/api/signature");
    const data = await response.json();

    const checkout = new WidgetCheckout({
      currency: data.currency,
      amountInCents: data.amountInCents,
      reference: data.reference,
      publicKey: data.publicKey,
      signature: { integrity: data.signature },
      redirectUrl: window.location.origin
    });

    checkout.open();
  });
</script>

</body>
</html>
