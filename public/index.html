<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Comprar Curso</title>
</head>
<body>

<h1>Comprar Curso - $2.000 COP</h1>

<div id="checkout"></div>

<script>
async function loadWompi() {
  try {
    const response = await fetch("/api/signature");
    const data = await response.json();

    const widgetHTML = `
      <script
        src="https://checkout.wompi.co/widget.js"
        data-render="button"
        data-public-key="pub_prod_i80UNdXv69FRkesjzaKNMyUHvNnDb5Mu"
        data-currency="${data.currency}"
        data-amount-in-cents="${data.amount}"
        data-reference="${data.reference}"
        data-signature-integrity="${data.signature}">
      <\/script>
    `;

    document.getElementById("checkout").innerHTML = widgetHTML;

  } catch (err) {
    console.error("Error cargando firma:", err);
  }
}

loadWompi();
</script>

</body>
</html>
